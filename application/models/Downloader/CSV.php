<?php/*Downloads locations data in a form of a CSV file ready to be used in Fusion tables or elsewhere*/class Downloader_CSV extends Downloader {  public function __construct() {  }    // redefining the MIME type  protected function getMIMEType() {    return 'text/csv';  }    // redefining the extension  protected function getExtension() {    return 'csv';  }    // redefining content output function  protected function downloadContent($stations) {    // printing CSV header    echo "Name,Latitude,Longitude\n";    // printing CSV rows    foreach ($stations as $station) {      // escaping quotation marks      // if the CSV is intended to be put into Fusion tables, ' symbols are incompatible with them      $station['name'] = preg_replace(array('/"/', "/'/"), array('""', '`'), $station['name']);            $row_fields = array(        $station['name'],        $station['latitude'],        $station['longitude']      );            // outputting a CSV row      echo '"' . implode('","', $row_fields) . '"' . "\n";    }  }}?>